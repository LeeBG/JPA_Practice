package com.cos.cookietest;



import org.apache.catalina.connector.Response;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.util.LinkedMultiValueMap;
import org.springframework.util.MultiValueMap;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import com.fasterxml.jackson.databind.ObjectMapper;

@RestController
public class IndexController {

	@GetMapping("/test")
	public String index() {
		RestTemplate rt = new RestTemplate();	//요청
		
		//헤더
		HttpHeaders headers = new HttpHeaders();
		headers.add("Content-Type", "application/json; charset=utf-8");
		
		//바디 데이터
		MultiValueMap<String, String> params = new LinkedMultiValueMap<>();
		params.add("username", "ssar");
		params.add("password", "1234");
		
		HttpEntity<MultiValueMap<String, String>> request = 
				new HttpEntity<>(params,headers);
		ResponseEntity response = rt.exchange("http://localhost:8080/login", HttpMethod.POST,request,String.class);
		
		System.out.println(response.getBody());
		
		return "ok";
	}
}
