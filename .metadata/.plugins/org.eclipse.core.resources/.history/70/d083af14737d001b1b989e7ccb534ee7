package com.cos.myjpa.service;

import java.util.ArrayList;
import java.util.List;

import com.cos.myjpa.domain.post.Post;
import com.cos.myjpa.domain.post.PostRepository;
import com.cos.myjpa.web.post.dto.PostRespDto;

public class PostService {
	private PostRepository postRepository;
	
	
	public List<PostRespDto> 전체찾기() {
		List<Post> postsEntity = postRepository.findAll();
		List<PostRespDto> postRespDtos = new ArrayList<>();
		for (Post post : postsEntity) {
			postRespDtos.add(new PostRespDto(post));
		}
		return postRespDtos;
	}

	public PostRespDto 한건찾기(Long id) {
		// 옵셔널 get(), orElseGet(), orElseThrow()
		Post postEntity = postRepository.findById(id).orElseThrow(() -> {
			return new IllegalArgumentException("id를 찾을 수 없습니다."); // 잘못된 인수가 들어온 오류이기 때문
		}); // .get() = Optional 안에 있는데이터를 꺼내라는 것

		PostRespDto postRespDto = new PostRespDto(postEntity); // DTO
		return postRespDto;
	}

	public Post 프로파일(Long id) {
		Post postEntity = postRepository.findById(id).orElseThrow(()->{
			return new IllegalArgumentException("id를 찾을 수 없습니다."); //잘못된 인수가 들어온 오류이기 때문
		});			//.get() = Optional 안에 있는데이터를 꺼내라는 것
		
		return postEntity;
	}
}
